<div class="bookings">
  <% @bookings.each do |booking| %>
    <div class="card-owner-booking m-5">
      <% start_date = booking.start_date %>
      <% return_date = booking.return_date %>
      <%# <img src="https://raw.githubusercontent.com/lewagon/fullstack-images/master/uikit/greece.jpg" /> %>
      <% if booking.status == 'rejected' %>
        <div class="card-booking-picture" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.8)), url(<%= cl_image_path(booking.vehicle.photo.key)%>)">Status : <%= booking.status.capitalize %></div>
      <% elsif booking.status == 'pending' %>
        <div class="card-booking-picture" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(255,255,255,0.8)), url(<%= cl_image_path(booking.vehicle.photo.key)%>)">Status : <%= booking.status.capitalize %></div>
      <% else %>
        <div class="card-booking-picture" style="background-image: url(<%= cl_image_path(booking.vehicle.photo.key)%>)"></div>
      <% end %>
      <%# <%= cl_image_tag(booking.photo.key,
              width: 400, height: 300, crop: :fill) %>
      <div class="owner-booking-card d-flex justify-content-between">
        <div class="m-4">
          <div class="container">
            <p>From: <%= booking.start_date %></p>
            <p>Until: <%= booking.return_date %></p>
            <p>Location: <%= booking.vehicle.location %></p>
            <p>Total Price: Â¥ <%= booking.vehicle.price * (return_date - start_date).to_i %></p>
          </div>
          <div class="container mb-4"><%= link_to "See more about your car : #{booking.vehicle.model}" ,vehicle_path(booking.vehicle), class: "btn btn-primary btn-inverse" %></div>
        </div>
        <div class="m-4">
          <h2><%= booking.vehicle.brand %> : <%= booking.vehicle.model %></h2>
        </div>
        <div class="m-4">
          <p>Guest: <%= booking.user.first_name %> <%= booking.user.last_name %></p>
          <%= simple_form_for booking do |f| %>
            <%= f.input :status, collection: Booking.statuses.keys, include_blank: false %>
            <%= f.submit class: 'btn btn-primary mt-2' %>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
</div>
<%# class Booking < ApplicationRecord
  belongs_to :user
  belongs_to :vehicle
  validates :start_date, presence: true
  validates :return_date, presence: true
  validates :status, presence: true
  enum status: { pending: 0, accepted: 1, rejected: 2 }
end %>
